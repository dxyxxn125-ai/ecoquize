<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>생태·환경 퀴즈 — 10문항</title>
  <style>
    :root{
      --bg1: #0f1724;
      --bg2: #0b3a4a;
      --card: rgba(255,255,255,0.05);
      --accent: #00d4ff;
      --accent-2: #7b61ff;
      --correct: #16a34a;
      --wrong: #ef4444;
      --glass: rgba(255,255,255,0.06);
      --glass-2: rgba(255,255,255,0.03);
      --text: #e6eef6;
      --muted: #9fb3c9;
      --shadow: 0 10px 30px rgba(2,6,23,0.6);
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", "Noto Sans KR", "Apple SD Gothic Neo", "Malgun Gothic", "맑은고딕", sans-serif;
    }

    html,body{
      height:100%;
      margin:0;
      background: linear-gradient(135deg,var(--bg1),var(--bg2));
      color:var(--text);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }

    .app {
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:28px;
      box-sizing:border-box;
    }

    .frame{
      width:100%;
      max-width:1100px;
      height:calc(100vh - 56px);
      background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));
      border-radius:18px;
      box-shadow:var(--shadow);
      display:grid;
      grid-template-columns: 360px 1fr;
      overflow:hidden;
      position:relative;
      border: 1px solid rgba(255,255,255,0.04);
    }

    /* LEFT SIDEBAR */
    .sidebar{
      padding:28px;
      background:
        radial-gradient(600px 600px at -10% -20%, rgba(123,97,255,0.08), transparent 8%),
        radial-gradient(400px 400px at 120% 120%, rgba(0,212,255,0.04), transparent 6%),
        var(--glass);
      backdrop-filter: blur(6px);
      display:flex;
      flex-direction:column;
      gap:18px;
    }

    .brand{
      display:flex;
      gap:12px;
      align-items:center;
    }
    .logo {
      width:56px;
      height:56px;
      border-radius:12px;
      background: linear-gradient(135deg,var(--accent),var(--accent-2));
      display:flex;
      align-items:center;
      justify-content:center;
      font-weight:700;
      color:#052027;
      box-shadow: 0 6px 18px rgba(123,97,255,0.18), inset 0 -6px 14px rgba(0,0,0,0.12);
    }
    .brand h1{
      margin:0;
      font-size:18px;
      letter-spacing:-0.2px;
    }
    .brand p{
      margin:0;
      font-size:12px;
      color:var(--muted);
    }

    .progress-wrap{
      margin-top:6px;
    }
    .progress-bar{
      height:12px;
      background:var(--glass-2);
      border-radius:999px;
      overflow:hidden;
    }
    .progress-fill{
      height:100%;
      width:0%;
      background: linear-gradient(90deg,var(--accent),var(--accent-2));
      border-radius:999px;
      transition: width 450ms cubic-bezier(.2,.9,.2,1);
      box-shadow: 0 6px 18px rgba(0,212,255,0.08);
    }
    .meta{
      display:flex;
      justify-content:space-between;
      gap:8px;
      margin-top:8px;
      color:var(--muted);
      font-size:13px;
    }

    .score-card{
      margin-top:auto;
      padding:14px;
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border-radius:12px;
      border:1px solid rgba(255,255,255,0.03);
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
    }
    .score-num{
      font-size:20px;
      font-weight:700;
      color:var(--accent);
    }
    .small-muted{ color:var(--muted); font-size:13px; }

    /* MAIN AREA */
    .main{
      padding:40px;
      display:flex;
      flex-direction:column;
      gap:18px;
      position:relative;
    }

    .top-row{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:12px;
    }
    .question-index{
      color:var(--muted);
      font-size:13px;
    }

    .card{
      margin-top:6px;
      flex:1;
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border-radius:14px;
      padding:28px;
      display:flex;
      flex-direction:column;
      gap:18px;
      box-shadow: 0 6px 30px rgba(2,6,23,0.6);
      border:1px solid rgba(255,255,255,0.03);
      overflow:auto;
    }

    .question{
      font-size:20px;
      font-weight:600;
      line-height:1.35;
    }

    .options{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:12px;
      margin-top:6px;
    }

    .option{
      padding:14px 12px;
      border-radius:10px;
      background:rgba(255,255,255,0.02);
      border:1px solid rgba(255,255,255,0.03);
      cursor:pointer;
      transition: transform 180ms ease, box-shadow 180ms ease, background 160ms;
      display:flex;
      gap:12px;
      align-items:flex-start;
    }
    .option:hover{ transform: translateY(-5px); box-shadow: 0 12px 24px rgba(2,6,23,0.45); }
    .option .label{
      font-weight:700;
      min-width:24px;
      text-align:center;
      color:var(--accent);
    }
    .option .text{
      font-size:15px;
      color:var(--text);
    }

    .option.correct{
      background: linear-gradient(90deg, rgba(22,163,74,0.14), rgba(22,163,74,0.06));
      border-color: rgba(22,163,74,0.3);
      box-shadow: 0 10px 26px rgba(16,185,129,0.06);
    }
    .option.wrong{
      background: linear-gradient(90deg, rgba(239,68,68,0.08), rgba(239,68,68,0.04));
      border-color: rgba(239,68,68,0.18);
      box-shadow: 0 10px 26px rgba(239,68,68,0.04);
    }
    .explanation{
      margin-top:auto;
      padding:12px 14px;
      border-radius:10px;
      background: rgba(255,255,255,0.02);
      color:var(--muted);
      font-size:14px;
    }

    .controls{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:12px;
      margin-top:16px;
    }
    .btn{
      background: linear-gradient(90deg,var(--accent),var(--accent-2));
      border:none;
      color:#01242b;
      font-weight:700;
      padding:10px 16px;
      border-radius:10px;
      cursor:pointer;
      box-shadow: 0 8px 26px rgba(123,97,255,0.12);
    }
    .btn.secondary{
      background:transparent;
      border:1px solid rgba(255,255,255,0.06);
      color:var(--text);
      font-weight:600;
    }
    .btn:disabled{ opacity:0.5; cursor:not-allowed; }

    /* RESULT MODAL (in-card view) */
    .result {
      display:none;
      gap:14px;
      align-items:center;
      justify-content:center;
      text-align:center;
    }
    .result.show{ display:flex; flex-direction:column; }

    .big-score{
      font-size:48px;
      font-weight:800;
      background: linear-gradient(90deg,var(--accent),var(--accent-2));
      -webkit-background-clip:text;
      background-clip:text;
      color:transparent;
    }
    .summary{
      display:flex;
      gap:12px;
      flex-direction:column;
      width:100%;
      max-height:220px;
      overflow:auto;
      text-align:left;
    }
    .summary .row{
      display:flex;
      justify-content:space-between;
      gap:8px;
      padding:8px;
      border-bottom:1px dashed rgba(255,255,255,0.03);
      color:var(--muted);
    }

    /* responsive */
    @media (max-width:960px){
      .frame{ grid-template-columns: 1fr; height:100vh; border-radius:0; max-width:unset; }
      .sidebar{ order:2; flex-direction:row; align-items:center; padding:14px; gap:8px; }
      .main{ order:1; padding:18px; }
      .options{ grid-template-columns:1fr; }
      .score-card{ display:none; }
    }

    footer.credit{
      position:absolute;
      bottom:10px;
      right:18px;
      color:var(--muted);
      font-size:13px;
    }
  </style>
</head>
<body>
  <div class="app">
    <div class="frame" role="application" aria-labelledby="quizTitle">
      <aside class="sidebar" aria-hidden="false">
        <div class="brand">
          <div class="logo">E</div>
          <div>
            <h1 id="quizTitle">EcoQuiz</h1>
            <p>생태·환경 퀴즈 — 10문제</p>
          </div>
        </div>

        <div class="progress-wrap">
          <div class="progress-bar" aria-hidden="true">
            <div class="progress-fill" id="progressFill" style="width:0%"></div>
          </div>
          <div class="meta">
            <div id="qInfo" class="small-muted">문제 1 / 10</div>
            <div id="qStat" class="small-muted">맞음: 0</div>
          </div>
        </div>

        <div class="score-card" aria-live="polite">
          <div>
            <div class="small-muted">현재 점수</div>
            <div class="score-num" id="currentScore">0</div>
          </div>
          <div style="text-align:right">
            <div class="small-muted">남은 문제</div>
            <div id="leftCount" class="score-num">10</div>
          </div>
        </div>

        <div style="margin-top:18px; color:var(--muted); font-size:13px; line-height:1.45;">
          <strong>퀴즈 팁</strong>
          <ul style="margin:8px 0 0 18px; padding:0;">
            <li>선택 후 정답과 해설을 확인하세요.</li>
            <li>최종 결과에서 모든 문제의 정답과 풀이를 볼 수 있어요.</li>
            <li>모바일에서도 편하게 풀 수 있습니다.</li>
          </ul>
        </div>

        <div style="margin-top:auto"></div>
      </aside>

      <main class="main">
        <div class="top-row">
          <div class="question-index" id="questionIndex">문제 1</div>
          <div style="display:flex; gap:8px; align-items:center;">
            <button class="btn secondary" id="showAnswerKeyBtn" title="정답 모아보기">정답 보기</button>
            <button class="btn" id="restartBtn" title="처음부터 다시">다시하기</button>
          </div>
        </div>

        <section class="card" id="card" aria-live="polite">
          <!-- Question content injected by JS -->
          <div id="quizContent">
            <!-- initial placeholder will be replaced -->
            <div class="question" id="questionText">로딩 중...</div>
            <div class="options" id="options"></div>
            <div class="explanation" id="explanation" style="display:none"></div>
            <div class="controls">
              <div style="color:var(--muted); font-size:13px" id="feedbackArea">선택지를 클릭하세요.</div>
              <div>
                <button class="btn secondary" id="nextBtn" disabled>다음</button>
              </div>
            </div>
          </div>

          <!-- Result view -->
          <div class="result" id="resultView" aria-hidden="true">
            <div>
              <div class="big-score" id="finalScore">0 / 10</div>
              <div style="color:var(--muted); margin-top:6px">정답: <span id="correctCount">0</span>개 · 틀림: <span id="wrongCount">0</span>개</div>
            </div>
            <div class="summary" id="answerSummary"></div>
            <div style="display:flex; gap:10px; margin-top:12px;">
              <button class="btn" id="retryBtn">다시 풀기</button>
              <button class="btn secondary" id="reviewBtn">문항 다시보기</button>
            </div>
          </div>
        </section>

        <footer class="credit" aria-hidden="true">© EcoQuiz • 디자인: 모던 · 반응형</footer>
      </main>
    </div>
  </div>

  <script>
    // 문제 목록(한국어) — 10문항
    const quiz = [
      {
        q: "생물다양성(Biodiversity)이란 무엇을 의미하나요?",
        choices: [
          "특정 지역의 기후 변화 정도",
          "지구상의 모든 생명체와 그들 간의 유전적·종적·생태계 수준의 다양성",
          "해양에 존재하는 생물의 숫자",
          "멸종위기종의 개체 수만을 포함한 개념"
        ],
        correct: 1,
        explain: "생물다양성은 유전자 다양성, 종 다양성, 생태계 다양성을 포함하는 포괄적 개념입니다."
      },
      {
        q: "먹이사슬에서 '생산자(Producer)'에 해당하는 것은?",
        choices: [
          "태양광 패널",
          "초식동물",
          "식물과 광합성을 하는 생물",
          "육식동물"
        ],
        correct: 2,
        explain: "생산자는 에너지원(주로 태양광)을 이용해 유기물을 만들어내는 생물로 식물과 광합성 미생물이 포함됩니다."
      },
      {
        q: "온실가스 중에서 인간 활동으로 가장 많이 배출되어 지구온난화에 크게 기여하는 것은?",
        choices: [
          "메탄(CH₄)",
          "오존(O₃)",
          "이산화탄소(CO₂)",
          "아르곤(Ar)"
        ],
        correct: 2,
        explain: "CO₂는 화석연료 연소와 산림 파괴 등으로 대량 배출되어 장기간 대기 중에 남아 온난화에 큰 영향을 미칩니다."
      },
      {
        q: "재생에너지에 해당하지 않는 것은?",
        choices: [
          "태양광",
          "풍력",
          "석탄화력",
          "수력"
        ],
        correct: 2,
        explain: "석탄화력은 화석연료 기반의 비재생 에너지입니다. 나머지는 재생 가능한 에너지입니다."
      },
      {
        q: "산성비의 주요 원인은 무엇인가요?",
        choices: [
          "이산화탄소와 메탄",
          "질소산화물 및 황산화물 배출",
          "오염되지 않은 깨끗한 비",
          "질소(N₂) 자체의 방출"
        ],
        correct: 1,
        explain: "화석연료 연소 등에서 발생한 SOx, NOx가 대기 중에서 반응해 산성비를 일으킵니다."
      },
      {
        q: "침입외래종(Invasive species)이 생태계에 미치는 영향으로 옳지 않은 것은?",
        choices: [
          "토착종의 경쟁과 감소 유발",
          "생태계 균형 파괴",
          "항상 생물다양성 증가에 기여한다",
          "농업·어업에 피해를 줄 수 있다"
        ],
        correct: 2,
        explain: "침입종은 종종 토착종을 대체해 생물다양성을 감소시키므로 '항상 증가에 기여'는 틀립니다."
      },
      {
        q: "물의 '탄소 발자국(carbon footprint)'을 줄이기 위한 개인 행동 예로 적절하지 않은 것은?",
        choices: [
          "육류 섭취 줄이기",
          "대중교통 이용 늘리기",
          "불필요한 전기제품 전원 끄기",
          "매일 자동차로 장거리 통근 늘리기"
        ],
        correct: 3,
        explain: "자동차 장거리 통근을 늘리는 것은 탄소 배출을 증가시키므로 탄소 발자국을 줄이는 행동이 아닙니다."
      },
      {
        q: "광합성 작용의 최종 산물로서 직접 생성되는 것은?",
        choices: [
          "산소(O₂)와 포도당(당류)",
          "이산화탄소(CO₂)와 질소(N₂)",
          "메탄(CH₄)",
          "암모니아(NH₃)"
        ],
        correct: 0,
        explain: "광합성은 이산화탄소와 물을 이용해 포도당을 만들고 산소를 방출합니다."
      },
      {
        q: "성층권 오존층 파괴의 주된 원인이었던 물질은?",
        choices: [
          "CFCs(프레온 가스)",
          "이산화탄소(CO₂)",
          "질소(N₂)",
          "에탄올"
        ],
        correct: 0,
        explain: "CFCs는 성층권에서 오존을 파괴해 오존층 얇아짐을 유발했습니다."
      },
      {
        q: "미세먼지(PM2.5)가 건강에 끼치는 영향으로 옳은 설명은?",
        choices: [
          "호흡기와 심혈관 질환 위험을 증가시킬 수 있다",
          "피부에만 영향을 미치고 호흡기에는 영향이 없다",
          "모든 미세먼지가 무해하다",
          "오직 기후 변화에만 영향을 준다"
        ],
        correct: 0,
        explain: "PM2.5는 폐 깊숙이 침투해 호흡기·심혈관계 질환 위험을 증가시킵니다."
      }
    ];

    // 상태
    let current = 0;
    let correctCount = 0;
    let userAnswers = new Array(quiz.length).fill(null);

    // DOM
    const questionText = document.getElementById('questionText');
    const optionsWrap = document.getElementById('options');
    const explanationEl = document.getElementById('explanation');
    const feedbackArea = document.getElementById('feedbackArea');
    const nextBtn = document.getElementById('nextBtn');
    const restartBtn = document.getElementById('restartBtn');
    const progressFill = document.getElementById('progressFill');
    const currentScoreEl = document.getElementById('currentScore');
    const leftCountEl = document.getElementById('leftCount');
    const qInfo = document.getElementById('qInfo');
    const qStat = document.getElementById('qStat');
    const questionIndexEl = document.getElementById('questionIndex');
    const resultView = document.getElementById('resultView');
    const card = document.getElementById('card');
    const finalScore = document.getElementById('finalScore');
    const correctCountEl = document.getElementById('correctCount');
    const wrongCountEl = document.getElementById('wrongCount');
    const answerSummary = document.getElementById('answerSummary');
    const retryBtn = document.getElementById('retryBtn');
    const reviewBtn = document.getElementById('reviewBtn');
    const showAnswerKeyBtn = document.getElementById('showAnswerKeyBtn');

    function renderQuestion(i){
      const item = quiz[i];
      questionText.textContent = item.q;
      optionsWrap.innerHTML = '';
      explanationEl.style.display = 'none';
      explanationEl.textContent = '';
      feedbackArea.textContent = '선택지를 클릭하세요.';
      nextBtn.disabled = true;
      questionIndexEl.textContent = `문제 ${i+1}`;
      qInfo.textContent = `문제 ${i+1} / ${quiz.length}`;
      qStat.textContent = `맞음: ${correctCount}`;

      // options
      const labels = ['A','B','C','D'];
      item.choices.forEach((c,idx) => {
        const opt = document.createElement('button');
        opt.className = 'option';
        opt.type = 'button';
        opt.setAttribute('data-idx', idx);
        opt.innerHTML = `<div class="label">${labels[idx]}</div><div class="text">${c}</div>`;
        opt.addEventListener('click', () => selectOption(idx, opt));
        optionsWrap.appendChild(opt);
      });

      // progress
      const pct = (i / (quiz.length)) * 100;
      progressFill.style.width = pct + '%';
      leftCountEl.textContent = quiz.length - i;
    }

    function selectOption(idx, el){
      // 이미 답한 문제면 무시
      if(userAnswers[current] !== null) return;
      userAnswers[current] = idx;

      const item = quiz[current];
      const children = Array.from(optionsWrap.children);
      children.forEach(ch => {
        ch.classList.remove('correct','wrong');
        ch.disabled = true;
      });

      if(idx === item.correct){
        el.classList.add('correct');
        correctCount++;
        feedbackArea.textContent = '정답입니다!';
      } else {
        el.classList.add('wrong');
        feedbackArea.textContent = '오답입니다.';
        // 정답 강조
        const correctBtn = children.find(c => +c.getAttribute('data-idx') === item.correct);
        if(correctBtn) correctBtn.classList.add('correct');
      }

      explanationEl.style.display = 'block';
      explanationEl.textContent = item.explain;
      nextBtn.disabled = false;

      currentScoreEl.textContent = correctCount;
      qStat.textContent = `맞음: ${correctCount}`;
    }

    nextBtn.addEventListener('click', () => {
      // 다음 문제로 이동하거나 결과 표시
      if(current < quiz.length - 1){
        current++;
        renderQuestion(current);
      } else {
        showResult();
      }
      // progress fill update to include next (use end percentage)
      const pct = ((current) / (quiz.length)) * 100;
      progressFill.style.width = pct + '%';
    });

    restartBtn.addEventListener('click', resetQuiz);
    retryBtn.addEventListener('click', resetQuiz);
    reviewBtn.addEventListener('click', reviewAnswers);
    showAnswerKeyBtn.addEventListener('click', showAnswerKey);

    function showResult(){
      // progress full
      progressFill.style.width = '100%';
      // hide question area and show result
      document.getElementById('quizContent').style.display = 'none';
      resultView.classList.add('show');
      card.scrollTop = 0;

      finalScore.textContent = `${correctCount} / ${quiz.length}`;
      correctCountEl.textContent = correctCount;
      wrongCountEl.textContent = quiz.length - correctCount;

      // summary list
      answerSummary.innerHTML = '';
      quiz.forEach((item, idx) => {
        const row = document.createElement('div');
        row.className = 'row';
        const left = document.createElement('div');
        left.innerHTML = `<strong>Q${idx+1}.</strong> ${item.q}`;
        const right = document.createElement('div');
        const user = userAnswers[idx];
        const isCorrect = user === item.correct;
        right.innerHTML = `${isCorrect ? '✅' : '❌'} ${item.choices[item.correct]}`;
        row.appendChild(left);
        row.appendChild(right);
        answerSummary.appendChild(row);
      });
    }

    function reviewAnswers(){
      // show questions with user's answers highlighted
      // We'll render one by one starting from 0 but disable picking
      resultView.classList.remove('show');
      document.getElementById('quizContent').style.display = 'block';
      current = 0;
      renderQuestion(current);

      // apply previously chosen answers visually
      applyUserAnswerVisual(current);
      // disable next button if already answered? keep same behavior
    }

    function applyUserAnswerVisual(i){
      const ans = userAnswers[i];
      if(ans === null) return;
      const children = Array.from(optionsWrap.children);
      children.forEach(ch => {
        ch.disabled = true;
        ch.classList.remove('correct','wrong');
        const idx = +ch.getAttribute('data-idx');
        if(idx === ans && idx === quiz[i].correct){
          ch.classList.add('correct');
        } else if(idx === ans && idx !== quiz[i].correct){
          ch.classList.add('wrong');
        }
        if(idx === quiz[i].correct) ch.classList.add('correct');
      });
      explanationEl.style.display = 'block';
      explanationEl.textContent = quiz[i].explain;
      nextBtn.disabled = false;
    }

    function resetQuiz(){
      current = 0;
      correctCount = 0;
      userAnswers = new Array(quiz.length).fill(null);
      currentScoreEl.textContent = 0;
      leftCountEl.textContent = quiz.length;
      resultView.classList.remove('show');
      document.getElementById('quizContent').style.display = 'block';
      renderQuestion(0);
      progressFill.style.width = '0%';
    }

    function showAnswerKey(){
      // 간단한 정답 목록 팝업(내장)
      const keyList = quiz.map((q, i) => `${i+1}. ${q.choices[q.correct]}`).join('\\n');
      alert('정답 모음:\\n\\n' + keyList);
    }

    // 초기 렌더
    renderQuestion(0);

    // 키보드 네비게이션 (숫자 or Enter)
    document.addEventListener('keydown', (e) => {
      // 1-4 to answer
      if(!document.getElementById('quizContent').contains(optionsWrap)) return;
      if(e.key >= '1' && e.key <= '4'){
        const idx = Number(e.key)-1;
        const btn = optionsWrap.querySelector(`[data-idx="${idx}"]`);
        if(btn) btn.click();
      }
      if(e.key === 'Enter'){
        if(!nextBtn.disabled) nextBtn.click();
      }
    });

    // 간단한 접근성: focus 첫 옵션
    optionsWrap.addEventListener('DOMNodeInserted', () => {
      const first = optionsWrap.querySelector('.option');
      if(first) first.focus();
    });

  </script>
</body>
</html>
